{% extends 'base.html.twig' %}
{% block title %}
    {{parent()}}
    Lecture Projet
{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{{ asset('css/swiper.min.css') }}">
    <link type="text/css" rel="stylesheet" href={{asset("css/Lecture_Projet.css")}}/>
{% endblock %}

{% block content %}
  <div id="Zone">
      <img class="Photo" src={{asset(project.banner.path)}} alt="Bandeau">
    <div id="titleArea">
    <a href="{{ path('projets') }}">
        <i aria-hidden class="fas fa-th-large"></i>
    </a>

    {% if previous is not null %}
        <a href="{{path('lecture-projet' , {'id' : previous.id ,'slug' : previous.title }) }}">
            <i aria-hidden class="far fa-angle-left icone-awesome"></i>
        </a>
    {% endif %}
    <h1 id="Titre">
        {{project.title|raw}}
    </h1>
    {% if next is not null %}
        <a href="{{path('lecture-projet' , {'id' : next.id ,'slug' : next.title }) }}">
            <i aria-hidden class="far fa-angle-right icone-awesome"></i>
        </a>
    {% endif %}
    </div>
    <div id="Cat">
        <h2 id="Categorie">
            {{project.categorie}}
        </h2>
        <p id="Separation_Categorie">
            |
        </p>
        <p id="Date">
            Posté le
            {{project.date|date("d/m/y")}}
        </p>
    </div>

    <hr class="hr_head">

    <div id="Bandeau_Information">
      <div class="info_item">
        <h3>Rôle :</h3>
        <p>{{ project.role }}</p>
      </div>
      <div class="info_item">
        <h3>Client :</h3>
        <p>{{ project.client }}</p>
      </div>
      <div class="info_item">
        <h3>Technologies :</h3>
        <p>{{ project.technologie }}</p>
      </div>
      <div class="info_item">
        <h3>Logiciels :</h3>
        <p>{{ project.logiciel }}</p>
      </div>
      <div class="info_item lien">
        <h3>Lien :</h3>
        {% if project.URLSite and project.status == "fini" %}
        <a href="{{project.URLSite}}">{{project.URLSite}}</a>
        {% elseif project.status == "En développement" %}
            <p> Site en cours de développement </p>
        {% else %}
            <p>Site hors-ligne</p>
        {% endif %}
      </div>

    </div>

    <div id="Description_Integrale">
        <h4>Description :</h4>
        <p>
            {{  project.description }}
        </p>

        <div
      id="Apercu">
      <!-- Swiper -->
      <div class="button-prev-mobile">
            <i aria-hidden class="far fa-angle-left icone-awesome"></i>
      </div>
      <div class="button-prev">

            <i aria-hidden class="far fa-angle-left icone-awesome"></i>
      </div>
      <div class="swiper-container desktop">

          <div class="swiper-wrapper">
              {% for img in project.gallery %}
                  <div class="swiper-slide"><img class="myImg" src={{asset(img.path)}} alt="{{img.alt}}"></div>
              {% endfor %}
          </div>
          <!-- Add Arrows -->

      </div>
      <div class="swiper-container mobile">

          <div class="swiper-wrapper">
              {% for img in project.gallery %}
                  <div class="swiper-slide"><img class="myImg" src={{asset(img.path)}} alt="{{img.alt}}"></div>
              {% endfor %}
          </div>
          <!-- Add Arrows -->

      </div>
      <div class="button-next">
            <i aria-hidden class="far fa-angle-right icone-awesome"></i>
      </div>
      <div class="button-next-mobile">
          <i aria-hidden class="far fa-angle-right icone-awesome"></i>

      </div>
  </div>
</div>
<div
  class="modal close" id="myModal">

  <!-- The Close Button -->
  <span class="close">&times;</span>

  <!-- Modal Content (The Image) -->
  <img class="myImgZoom" id="imgZoom" src={{asset(project.miniature.path)}} alt="Aperçu Faeriths">

  <!-- Modal Caption (Image Text) -->
  <div class="caption" id="caption"></div>
</div>

    </div>
</div>

{% endblock %}

{% block js %}
<script src="{{asset('js/swiper.min.js')}}" type="text/javascript"></script>

  <!-- Initialize Swiper -->
  <script>
      var swiper = new Swiper('.swiper-container', {
          nextButton: '.button-next',
          prevButton: '.button-prev',
          slidesPerView: 3,
          paginationClickable: false,
          spaceBetween: 33,
          loop: true
      });
      var swiper = new Swiper('.mobile', {
          nextButton: '.button-next-mobile',
          prevButton: '.button-prev-mobile',
          slidesPerView: 1,
          paginationClickable: false,
          spaceBetween: 33,
          loop: true
      });
  </script>

  <script>
      // Get the image and insert it inside the modal - use its "alt" text as a caption
      var img = document.getElementsByClassName('myImg');
      var modalImg = document.getElementById("imgZoom");
      var captionText = document.getElementById("caption");
      for (let element of img) {
          element.onclick = function () {
              document.getElementById("myModal").style.display = "block";
              modalImg.src = this.src;
              captionText.innerHTML = this.alt;
          }
      }

      // Get the <span> element that closes the modal
      var span = document.getElementsByClassName("close")[0];

      // When the user clicks on <span> (x), close the modal
      span.onclick = function () {
          document.getElementById("myModal").style.display = "none";
      }
  </script>
{% endblock %}
